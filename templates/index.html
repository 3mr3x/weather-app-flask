<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>{{ title }} â€” Weather Forecast</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='style.css') }}">
</head>
<body>
    <div class="container">
        <div class="card">
            <div class="space-between mb-30">
                <h1 style="margin: 0;">ğŸ“ {{ city }}</h1>
                <a href="/" class="btn btn-secondary btn-small">â† Back</a>
            </div>

            {% if current_weather %}
            <!-- Current Weather Card -->
            <div class="weather-card">
                <div class="weather-card-content">
                    <div class="weather-description">{{ current_weather.main }}</div>
                    <div class="temperature">{{ (current_weather.temp|float|round(1)) }}Â°C</div>
                    <p class="text-muted">Feels like {{ (current_weather.feels_like|float|round(1)) }}Â°C</p>
                </div>
                <div class="weather-card-icon">
                    {% if 'rain' in current_weather.main.lower() %}â›ˆï¸
                    {% elif 'cloud' in current_weather.main.lower() %}â˜ï¸
                    {% elif 'clear' in current_weather.main.lower() %}â˜€ï¸
                    {% elif 'snow' in current_weather.main.lower() %}â„ï¸
                    {% elif 'mist' in current_weather.main.lower() %}ğŸŒ«ï¸
                    {% else %}ğŸŒ¤ï¸
                    {% endif %}
                </div>
            </div>

            <!-- Weather Details Grid -->
            <div class="weather-details mt-30">
                <div class="detail-item">
                    <div class="detail-label">Humidity</div>
                    <div class="detail-value">{{ current_weather.humidity }}%</div>
                </div>
                <div class="detail-item">
                    <div class="detail-label">Wind Speed</div>
                    <div class="detail-value">{{ (current_weather.wind_speed|float|round(1)) }} m/s</div>
                </div>
                <div class="detail-item">
                    <div class="detail-label">Pressure</div>
                    <div class="detail-value">{{ current_weather.pressure }} hPa</div>
                </div>
                <div class="detail-item">
                    <div class="detail-label">Visibility</div>
                    <div class="detail-value">{{ (current_weather.visibility|float|round(1)/1000)|round(1) }} km</div>
                </div>
            </div>

            {% if forecast_data %}
            <!-- Forecast Section -->
            <div class="mt-30">
                <h2 style="margin-top: 0;">ğŸ“… {{ period|capitalize }} Forecast</h2>
                <div class="forecast-grid">
                    {% for day in forecast_data %}
                    <div class="forecast-item">
                        <div class="forecast-day">{{ day.date }}</div>
                        <div class="forecast-temp">{{ (day.temp|float|round(1)) }}Â°C</div>
                        <div class="forecast-condition">{{ day.condition }}</div>
                    </div>
                    {% endfor %}
                </div>
            </div>
            {% endif %}

            {% else %}
            <div class="alert alert-error">
                <span class="alert-icon">âš ï¸</span>
                <div>No weather data available for this city.</div>
            </div>
            {% endif %}

            <div class="mt-30 text-center">
                <form action="/" method="get">
                    <input type="hidden" name="city" value="">
                    <button type="button" class="btn btn-secondary" onclick="window.location.href='/'">
                        Search Another City
                    </button>
                </form>
            </div>
        </div>
    </div>
</body>
</html>

            .search-bar {
                width: 100%;
            }

            table {
                font-size: 14px;
            }
        }
    </style>
</head>
<body>
    <div class="banner">
        <h2>City: {{ request.args.get('city', 'N/A') }}</h2>
        <h3>Period: {{ period.capitalize() if period else 'N/A' }} Forecast</h3>
        <p>Query Type: {{ period.capitalize() if period else 'N/A' }}</p>
    </div>

    <div class="form-container">
        <form action="/forecast" method="get">
            <input type="text" name="city" placeholder="Enter city" required class="search-bar" value="{{ request.args.get('city', '') }}">
            <button type="submit" class="button" name="period" value="daily">Daily Forecast</button>
            <button type="submit" class="button" name="period" value="weekly">Weekly Forecast</button>
        </form>
        <button class="pdf-button" onclick="generatePDF()">Generate PDF</button>
    </div>

    <div class="city-info">
        {% if period == 'daily' %}
        <h2>Today's Weather</h2>
        <table>
            <tr>
                <th>Temperature</th>
                <th>Humidity</th>
                <th>Weather Description</th>
            </tr>
            <tr>
                <td>{{ data["main"]["temp"] }}Â°C</td>
                <td>{{ data["main"]["humidity"] }}%</td>
                <td>
                    <div id="weather">
                        <img src="http://openweathermap.org/img/wn/{{ data['weather'][0]['icon'] }}.png" alt="Weather Icon">
                        {{ data["weather"][0]["description"].capitalize() }}
                    </div>
                </td>
            </tr>
        </table>
        {% elif period == 'weekly' %}
        <h2>5-Day Forecast</h2>
        <table>
            <tr>
                <th>Date</th>
                <th>Temperature</th>
                <th>Humidity</th>
                <th>Description</th>
            </tr>
            {% for item in data["list"] %}
                <tr>
                    <td>{{ item["dt_txt"] }}</td>
                    <td>{{ item["main"]["temp"] }}Â°C</td>
                    <td>{{ item["main"]["humidity"] }}%</td>
                    <td>
                        <div id="weather">
                            <img src="http://openweathermap.org/img/wn/{{ item['weather'][0]['icon'] }}.png" alt="Weather Icon">
                            {{ item["weather"][0]["description"].capitalize() }}
                        </div>
                    </td>
                </tr>
            {% endfor %}
        </table>
        {% else %}
        <p>Invalid period selected. Please choose "daily" or "weekly".</p>
        {% endif %}
    </div>

    <script>
        function generatePDF() {
            // PDF oluÅŸturma kodu burada olacak.
            alert('PDF generation function to be implemented.');
        }
    </script>
</body>
</html>
